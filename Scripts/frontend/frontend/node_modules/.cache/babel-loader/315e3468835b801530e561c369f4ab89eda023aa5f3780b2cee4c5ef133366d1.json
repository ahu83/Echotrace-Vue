{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Ahzam/Desktop/Assignments/CSIT321/Echotrace-Vue/Scripts/frontend/frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.array.push.js\");\nvar _SidePanel = _interopRequireDefault(require(\"@/components/SidePanel.vue\"));\nvar _api = _interopRequireDefault(require(\"@/api\"));\nvar _default = exports.default = {\n  name: \"AiHistory\",\n  components: {\n    SidePanel: _SidePanel.default\n  },\n  data() {\n    return {\n      list: [],\n      dlg: {\n        visible: false,\n        item: null\n      },\n      loading: false\n    };\n  },\n  async mounted() {\n    this.fetchHistory();\n  },\n  methods: {\n    onSignout() {\n      localStorage.removeItem(\"token\");\n      this.$router.push(\"/login\");\n    },\n    async fetchHistory() {\n      try {\n        this.loading = true;\n        const token = localStorage.getItem(\"token\");\n        const res = await _api.default.get(\"/history\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.list = res.data || [];\n      } catch (err) {\n        console.error(\"Failed to fetch history:\", err);\n        this.$message.error(\"Error loading history\");\n      } finally {\n        this.loading = false;\n      }\n    },\n    playAudio(row) {\n      this.dlg.item = row;\n      this.dlg.visible = true;\n    },\n    download(row) {\n      if (!row.url) return;\n      const a = document.createElement(\"a\");\n      a.href = row.url;\n      a.download = `${row.title.replace(/\\s+/g, \"_\")}.wav`;\n      a.click();\n    },\n    remove(row) {\n      this.$confirm(\"Delete this record?\", \"Confirm\", {\n        type: \"warning\"\n      }).then(() => {\n        this.list = this.list.filter(r => r.id !== row.id);\n        this.$message.success(\"Deleted (local only)\");\n      }).catch(() => {});\n    },\n    formatDate(s) {\n      const d = new Date(s);\n      return d.toLocaleString();\n    },\n    typeLabel(t) {\n      return {\n        tts: \"Text-To-Speech\",\n        detect: \"Detection\",\n        wm: \"Watermark\"\n      }[t] || t;\n    },\n    typeTagType(t) {\n      return {\n        tts: \"success\",\n        detect: \"warning\",\n        wm: \"info\"\n      }[t] || \"info\";\n    }\n  }\n};","map":{"version":3,"names":["_SidePanel","_interopRequireDefault","require","_api","_default","exports","default","name","components","SidePanel","data","list","dlg","visible","item","loading","mounted","fetchHistory","methods","onSignout","localStorage","removeItem","$router","push","token","getItem","res","api","get","headers","Authorization","err","console","error","$message","playAudio","row","download","url","a","document","createElement","href","title","replace","click","remove","$confirm","type","then","filter","r","id","success","catch","formatDate","s","d","Date","toLocaleString","typeLabel","t","tts","detect","wm","typeTagType"],"sources":["src/views/AiHistory.vue"],"sourcesContent":["<template>\n  <div class=\"page history\">\n    <side-panel @signout=\"onSignout\" />\n\n    <div class=\"looper\"></div>\n\n    <section class=\"panel-wrap\">\n      <div class=\"panel\">\n        <div class=\"head\">\n          <h2 class=\"title\">AI Generation History</h2>\n        </div>\n\n        <el-table :data=\"list\" height=\"480\" style=\"width:100%\">\n          <el-table-column prop=\"type\" label=\"Type\" width=\"240\">\n            <template slot-scope=\"s\">\n              <el-tag size=\"small\" :type=\"typeTagType(s.row.type)\">\n                {{ typeLabel(s.row.type) }}\n              </el-tag>\n            </template>\n          </el-table-column>\n\n          <el-table-column prop=\"title\" label=\"Title\" min-width=\"240\" />\n          <el-table-column label=\"Created\" width=\"240\">\n            <template slot-scope=\"s\">{{ formatDate(s.row.createdAt) }}</template>\n          </el-table-column>\n\n          <el-table-column label=\"Actions\" width=\"220\" fixed=\"right\">\n            <template slot-scope=\"s\">\n              <el-button type=\"text\" @click=\"playAudio(s.row)\">Play</el-button>\n              <el-button type=\"text\" @click=\"download(s.row)\">Download</el-button>\n              <el-button type=\"text\" @click=\"remove(s.row)\">Delete</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n      </div>\n    </section>\n\n    <el-dialog title=\"Playback\" :visible.sync=\"dlg.visible\" width=\"720px\">\n      <div v-if=\"dlg.item\">\n        <h3>{{ dlg.item.title }}</h3>\n        <audio :src=\"dlg.item.url\" controls style=\"width:100%\"></audio>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport SidePanel from \"@/components/SidePanel.vue\";\nimport api from \"@/api\";\n\nexport default {\n  name: \"AiHistory\",\n  components: { SidePanel },\n  data() {\n    return {\n      list: [],\n      dlg: { visible: false, item: null },\n      loading: false,\n    };\n  },\n  async mounted() {\n    this.fetchHistory();\n  },\n  methods: {\n    onSignout() {\n      localStorage.removeItem(\"token\");\n      this.$router.push(\"/login\");\n    },\n\n    async fetchHistory() {\n      try {\n        this.loading = true;\n        const token = localStorage.getItem(\"token\");\n        const res = await api.get(\"/history\", {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        this.list = res.data || [];\n      } catch (err) {\n        console.error(\"Failed to fetch history:\", err);\n        this.$message.error(\"Error loading history\");\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    playAudio(row) {\n      this.dlg.item = row;\n      this.dlg.visible = true;\n    },\n\n    download(row) {\n      if (!row.url) return;\n      const a = document.createElement(\"a\");\n      a.href = row.url;\n      a.download = `${row.title.replace(/\\s+/g, \"_\")}.wav`;\n      a.click();\n    },\n\n    remove(row) {\n      this.$confirm(\"Delete this record?\", \"Confirm\", { type: \"warning\" })\n        .then(() => {\n          this.list = this.list.filter((r) => r.id !== row.id);\n          this.$message.success(\"Deleted (local only)\");\n        })\n        .catch(() => {});\n    },\n\n    formatDate(s) {\n      const d = new Date(s);\n      return d.toLocaleString();\n    },\n\n    typeLabel(t) {\n      return { tts: \"Text-To-Speech\", detect: \"Detection\", wm: \"Watermark\" }[t] || t;\n    },\n\n    typeTagType(t) {\n      return { tts: \"success\", detect: \"warning\", wm: \"info\" }[t] || \"info\";\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n$bg: #0a0a0a;\n$panel: #000;\n$border: rgba(255, 255, 255, 0.08);\n$text: #e6e8eb;\n\n.history {\n  min-height: 100vh;\n  background: $bg;\n  color: $text;\n  position: relative;\n}\n\n.panel-wrap {\n  padding-left: 72px;\n}\n\n@media (min-width: 992px) {\n  .side.expanded + .looper + .panel-wrap {\n    padding-left: 226px;\n  }\n}\n\n.looper {\n  position: fixed;\n  top: 200px;\n  inset: 0 0 0 72px;\n  background: url(~@/assets/looper-bg.png) center / 1600px auto no-repeat;\n  opacity: 0.5;\n  transform: rotate(15deg);\n  pointer-events: none;\n  background-size: 100%;\n  background-position: 0px -300px;\n}\n\n.panel {\n  max-width: 1120px;\n  margin: 0 auto 80px;\n  background: $panel;\n  border: 1px solid $border;\n  border-radius: 16px;\n  box-shadow: 0 4px 50px rgba(33, 33, 33, 0.08),\n    0 4px 6px rgba(33, 33, 33, 0.04);\n  padding: 18px 18px 10px;\n  position: relative;\n  top: 100px;\n}\n\n.head {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: #000;\n  padding: 8px 6px 12px;\n  border-bottom: 1px solid $border;\n}\n\n.title {\n  margin: 0;\n  color: #fff;\n  font: 800 28px/1.2 \"Cabin\", \"Segoe UI\", Arial, sans-serif;\n}\n\n\n::v-deep .el-table,\n::v-deep .el-table__body,\n::v-deep .el-table th,\n::v-deep .el-table tr,\n::v-deep .el-table__empty-block {\n  background: #000 !important;\n  color: #e6e8eb !important;\n}\n\n::v-deep .el-table__header th {\n  background: #111 !important;\n  color: #fff !important;\n}\n\n::v-deep .el-table td,\n::v-deep .el-table th.is-leaf {\n  border-bottom: 1px solid rgba(255, 255, 255, 0.06);\n}\n\n::v-deep .el-table__body tr:hover > td {\n  background: rgba(255, 255, 255, 0.04) !important;\n}\n\n::v-deep .el-table__empty-text {\n  color: #aaa !important;\n}\n\n.no-data {\n  text-align: center;\n  color: #aaa;\n  margin-top: 40px;\n}\n</style>\n"],"mappings":";;;;;;;;AA+CA,IAAAA,UAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,IAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAA,IAAAE,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEA;EACAC,IAAA;EACAC,UAAA;IAAAC,SAAA,EAAAA;EAAA;EACAC,KAAA;IACA;MACAC,IAAA;MACAC,GAAA;QAAAC,OAAA;QAAAC,IAAA;MAAA;MACAC,OAAA;IACA;EACA;EACA,MAAAC,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IACAC,UAAA;MACAC,YAAA,CAAAC,UAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;IAEA,MAAAN,aAAA;MACA;QACA,KAAAF,OAAA;QACA,MAAAS,KAAA,GAAAJ,YAAA,CAAAK,OAAA;QACA,MAAAC,GAAA,SAAAC,YAAA,CAAAC,GAAA;UACAC,OAAA;YAAAC,aAAA,YAAAN,KAAA;UAAA;QACA;QACA,KAAAb,IAAA,GAAAe,GAAA,CAAAhB,IAAA;MACA,SAAAqB,GAAA;QACAC,OAAA,CAAAC,KAAA,6BAAAF,GAAA;QACA,KAAAG,QAAA,CAAAD,KAAA;MACA;QACA,KAAAlB,OAAA;MACA;IACA;IAEAoB,UAAAC,GAAA;MACA,KAAAxB,GAAA,CAAAE,IAAA,GAAAsB,GAAA;MACA,KAAAxB,GAAA,CAAAC,OAAA;IACA;IAEAwB,SAAAD,GAAA;MACA,KAAAA,GAAA,CAAAE,GAAA;MACA,MAAAC,CAAA,GAAAC,QAAA,CAAAC,aAAA;MACAF,CAAA,CAAAG,IAAA,GAAAN,GAAA,CAAAE,GAAA;MACAC,CAAA,CAAAF,QAAA,MAAAD,GAAA,CAAAO,KAAA,CAAAC,OAAA;MACAL,CAAA,CAAAM,KAAA;IACA;IAEAC,OAAAV,GAAA;MACA,KAAAW,QAAA;QAAAC,IAAA;MAAA,GACAC,IAAA;QACA,KAAAtC,IAAA,QAAAA,IAAA,CAAAuC,MAAA,CAAAC,CAAA,IAAAA,CAAA,CAAAC,EAAA,KAAAhB,GAAA,CAAAgB,EAAA;QACA,KAAAlB,QAAA,CAAAmB,OAAA;MACA,GACAC,KAAA;IACA;IAEAC,WAAAC,CAAA;MACA,MAAAC,CAAA,OAAAC,IAAA,CAAAF,CAAA;MACA,OAAAC,CAAA,CAAAE,cAAA;IACA;IAEAC,UAAAC,CAAA;MACA;QAAAC,GAAA;QAAAC,MAAA;QAAAC,EAAA;MAAA,EAAAH,CAAA,KAAAA,CAAA;IACA;IAEAI,YAAAJ,CAAA;MACA;QAAAC,GAAA;QAAAC,MAAA;QAAAC,EAAA;MAAA,EAAAH,CAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"script","externalDependencies":[]}