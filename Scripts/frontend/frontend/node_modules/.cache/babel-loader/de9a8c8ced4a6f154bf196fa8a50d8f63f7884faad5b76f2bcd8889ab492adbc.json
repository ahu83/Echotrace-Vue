{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Ahzam/Documents/GitHub/Echotrace-Vue/Scripts/frontend/frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.array.push.js\");\nvar _SidePanel = _interopRequireDefault(require(\"@/components/SidePanel.vue\"));\nvar _api = _interopRequireDefault(require(\"@/api\"));\nvar _default = exports.default = {\n  name: \"AiHistory\",\n  components: {\n    SidePanel: _SidePanel.default\n  },\n  data() {\n    return {\n      list: [],\n      dlg: {\n        visible: false,\n        item: null\n      },\n      loading: false\n    };\n  },\n  async mounted() {\n    this.fetchHistory();\n  },\n  methods: {\n    onSignout() {\n      localStorage.removeItem(\"token\");\n      this.$router.push(\"/login\");\n    },\n    async fetchHistory() {\n      try {\n        this.loading = true;\n        const token = localStorage.getItem(\"token\");\n        const res = await _api.default.get(\"/history\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.list = res.data || [];\n      } catch (err) {\n        console.error(\"Failed to fetch history:\", err);\n        this.$message.error(\"Error loading history\");\n      } finally {\n        this.loading = false;\n      }\n    },\n    playAudio(row) {\n      this.dlg.item = row;\n      this.dlg.visible = true;\n    },\n    download(row) {\n      if (!row.url) return;\n      const a = document.createElement(\"a\");\n      a.href = row.url;\n      a.download = `${row.title.replace(/\\s+/g, \"_\")}.wav`;\n      a.click();\n    },\n    remove(row) {\n      this.$confirm(\"Delete this record?\", \"Confirm\", {\n        type: \"warning\"\n      }).then(() => {\n        this.list = this.list.filter(r => r.id !== row.id);\n        this.$message.success(\"Deleted (local only)\");\n      }).catch(() => {});\n    },\n    formatDate(s) {\n      const d = new Date(s);\n      return d.toLocaleString();\n    },\n    typeLabel(t) {\n      return {\n        tts: \"Text-To-Speech\",\n        detect: \"Detection\",\n        wm: \"Watermark\"\n      }[t] || t;\n    },\n    typeTagType(t) {\n      return {\n        tts: \"success\",\n        detect: \"warning\",\n        wm: \"info\"\n      }[t] || \"info\";\n    }\n  }\n};","map":{"version":3,"names":["_SidePanel","_interopRequireDefault","require","_api","_default","exports","default","name","components","SidePanel","data","list","dlg","visible","item","loading","mounted","fetchHistory","methods","onSignout","localStorage","removeItem","$router","push","token","getItem","res","api","get","headers","Authorization","err","console","error","$message","playAudio","row","download","url","a","document","createElement","href","title","replace","click","remove","$confirm","type","then","filter","r","id","success","catch","formatDate","s","d","Date","toLocaleString","typeLabel","t","tts","detect","wm","typeTagType"],"sources":["src/views/AiHistory.vue"],"sourcesContent":["<template>\r\n  <div class=\"page history\">\r\n    <side-panel @signout=\"onSignout\" />\r\n\r\n    <div class=\"looper\"></div>\r\n\r\n    <section class=\"panel-wrap\">\r\n      <div class=\"panel\">\r\n        <div class=\"head\">\r\n          <h2 class=\"title\">AI Generation History</h2>\r\n        </div>\r\n\r\n        <el-table :data=\"list\" height=\"480\" style=\"width:100%\">\r\n          <el-table-column prop=\"type\" label=\"Type\" width=\"240\">\r\n            <template slot-scope=\"s\">\r\n              <el-tag size=\"small\" :type=\"typeTagType(s.row.type)\">\r\n                {{ typeLabel(s.row.type) }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column prop=\"title\" label=\"Title\" min-width=\"240\" />\r\n          <el-table-column label=\"Created\" width=\"240\">\r\n            <template slot-scope=\"s\">{{ formatDate(s.row.createdAt) }}</template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"Actions\" width=\"220\" fixed=\"right\">\r\n            <template slot-scope=\"s\">\r\n              <el-button type=\"text\" @click=\"playAudio(s.row)\">Play</el-button>\r\n              <el-button type=\"text\" @click=\"download(s.row)\">Download</el-button>\r\n              <el-button type=\"text\" @click=\"remove(s.row)\">Delete</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n    </section>\r\n\r\n    <el-dialog title=\"Playback\" :visible.sync=\"dlg.visible\" width=\"720px\">\r\n      <div v-if=\"dlg.item\">\r\n        <h3>{{ dlg.item.title }}</h3>\r\n        <audio :src=\"dlg.item.url\" controls style=\"width:100%\"></audio>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SidePanel from \"@/components/SidePanel.vue\";\r\nimport api from \"@/api\";\r\n\r\nexport default {\r\n  name: \"AiHistory\",\r\n  components: { SidePanel },\r\n  data() {\r\n    return {\r\n      list: [],\r\n      dlg: { visible: false, item: null },\r\n      loading: false,\r\n    };\r\n  },\r\n  async mounted() {\r\n    this.fetchHistory();\r\n  },\r\n  methods: {\r\n    onSignout() {\r\n      localStorage.removeItem(\"token\");\r\n      this.$router.push(\"/login\");\r\n    },\r\n\r\n    async fetchHistory() {\r\n      try {\r\n        this.loading = true;\r\n        const token = localStorage.getItem(\"token\");\r\n        const res = await api.get(\"/history\", {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        this.list = res.data || [];\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch history:\", err);\r\n        this.$message.error(\"Error loading history\");\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n\r\n    playAudio(row) {\r\n      this.dlg.item = row;\r\n      this.dlg.visible = true;\r\n    },\r\n\r\n    download(row) {\r\n      if (!row.url) return;\r\n      const a = document.createElement(\"a\");\r\n      a.href = row.url;\r\n      a.download = `${row.title.replace(/\\s+/g, \"_\")}.wav`;\r\n      a.click();\r\n    },\r\n\r\n    remove(row) {\r\n      this.$confirm(\"Delete this record?\", \"Confirm\", { type: \"warning\" })\r\n        .then(() => {\r\n          this.list = this.list.filter((r) => r.id !== row.id);\r\n          this.$message.success(\"Deleted (local only)\");\r\n        })\r\n        .catch(() => {});\r\n    },\r\n\r\n    formatDate(s) {\r\n      const d = new Date(s);\r\n      return d.toLocaleString();\r\n    },\r\n\r\n    typeLabel(t) {\r\n      return { tts: \"Text-To-Speech\", detect: \"Detection\", wm: \"Watermark\" }[t] || t;\r\n    },\r\n\r\n    typeTagType(t) {\r\n      return { tts: \"success\", detect: \"warning\", wm: \"info\" }[t] || \"info\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$bg: #0a0a0a;\r\n$panel: #000;\r\n$border: rgba(255, 255, 255, 0.08);\r\n$text: #e6e8eb;\r\n\r\n.history {\r\n  min-height: 100vh;\r\n  background: $bg;\r\n  color: $text;\r\n  position: relative;\r\n}\r\n\r\n.panel-wrap {\r\n  padding-left: 72px;\r\n}\r\n\r\n@media (min-width: 992px) {\r\n  .side.expanded + .looper + .panel-wrap {\r\n    padding-left: 226px;\r\n  }\r\n}\r\n\r\n.looper {\r\n  position: fixed;\r\n  top: 200px;\r\n  inset: 0 0 0 72px;\r\n  background: url(~@/assets/looper-bg.png) center / 1600px auto no-repeat;\r\n  opacity: 0.5;\r\n  transform: rotate(15deg);\r\n  pointer-events: none;\r\n  background-size: 100%;\r\n  background-position: 0px -300px;\r\n}\r\n\r\n.panel {\r\n  max-width: 1120px;\r\n  margin: 0 auto 80px;\r\n  background: $panel;\r\n  border: 1px solid $border;\r\n  border-radius: 16px;\r\n  box-shadow: 0 4px 50px rgba(33, 33, 33, 0.08),\r\n    0 4px 6px rgba(33, 33, 33, 0.04);\r\n  padding: 18px 18px 10px;\r\n  position: relative;\r\n  top: 100px;\r\n}\r\n\r\n.head {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  background: #000;\r\n  padding: 8px 6px 12px;\r\n  border-bottom: 1px solid $border;\r\n}\r\n\r\n.title {\r\n  margin: 0;\r\n  color: #fff;\r\n  font: 800 28px/1.2 \"Cabin\", \"Segoe UI\", Arial, sans-serif;\r\n}\r\n\r\n\r\n::v-deep .el-table,\r\n::v-deep .el-table__body,\r\n::v-deep .el-table th,\r\n::v-deep .el-table tr,\r\n::v-deep .el-table__empty-block {\r\n  background: #000 !important;\r\n  color: #e6e8eb !important;\r\n}\r\n\r\n::v-deep .el-table__header th {\r\n  background: #111 !important;\r\n  color: #fff !important;\r\n}\r\n\r\n::v-deep .el-table td,\r\n::v-deep .el-table th.is-leaf {\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.06);\r\n}\r\n\r\n::v-deep .el-table__body tr:hover > td {\r\n  background: rgba(255, 255, 255, 0.04) !important;\r\n}\r\n\r\n::v-deep .el-table__empty-text {\r\n  color: #aaa !important;\r\n}\r\n\r\n.no-data {\r\n  text-align: center;\r\n  color: #aaa;\r\n  margin-top: 40px;\r\n}\r\n</style>\r\n"],"mappings":";;;;;;;;AA+CA,IAAAA,UAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,IAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAA,IAAAE,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEA;EACAC,IAAA;EACAC,UAAA;IAAAC,SAAA,EAAAA;EAAA;EACAC,KAAA;IACA;MACAC,IAAA;MACAC,GAAA;QAAAC,OAAA;QAAAC,IAAA;MAAA;MACAC,OAAA;IACA;EACA;EACA,MAAAC,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IACAC,UAAA;MACAC,YAAA,CAAAC,UAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;IAEA,MAAAN,aAAA;MACA;QACA,KAAAF,OAAA;QACA,MAAAS,KAAA,GAAAJ,YAAA,CAAAK,OAAA;QACA,MAAAC,GAAA,SAAAC,YAAA,CAAAC,GAAA;UACAC,OAAA;YAAAC,aAAA,YAAAN,KAAA;UAAA;QACA;QACA,KAAAb,IAAA,GAAAe,GAAA,CAAAhB,IAAA;MACA,SAAAqB,GAAA;QACAC,OAAA,CAAAC,KAAA,6BAAAF,GAAA;QACA,KAAAG,QAAA,CAAAD,KAAA;MACA;QACA,KAAAlB,OAAA;MACA;IACA;IAEAoB,UAAAC,GAAA;MACA,KAAAxB,GAAA,CAAAE,IAAA,GAAAsB,GAAA;MACA,KAAAxB,GAAA,CAAAC,OAAA;IACA;IAEAwB,SAAAD,GAAA;MACA,KAAAA,GAAA,CAAAE,GAAA;MACA,MAAAC,CAAA,GAAAC,QAAA,CAAAC,aAAA;MACAF,CAAA,CAAAG,IAAA,GAAAN,GAAA,CAAAE,GAAA;MACAC,CAAA,CAAAF,QAAA,MAAAD,GAAA,CAAAO,KAAA,CAAAC,OAAA;MACAL,CAAA,CAAAM,KAAA;IACA;IAEAC,OAAAV,GAAA;MACA,KAAAW,QAAA;QAAAC,IAAA;MAAA,GACAC,IAAA;QACA,KAAAtC,IAAA,QAAAA,IAAA,CAAAuC,MAAA,CAAAC,CAAA,IAAAA,CAAA,CAAAC,EAAA,KAAAhB,GAAA,CAAAgB,EAAA;QACA,KAAAlB,QAAA,CAAAmB,OAAA;MACA,GACAC,KAAA;IACA;IAEAC,WAAAC,CAAA;MACA,MAAAC,CAAA,OAAAC,IAAA,CAAAF,CAAA;MACA,OAAAC,CAAA,CAAAE,cAAA;IACA;IAEAC,UAAAC,CAAA;MACA;QAAAC,GAAA;QAAAC,MAAA;QAAAC,EAAA;MAAA,EAAAH,CAAA,KAAAA,CAAA;IACA;IAEAI,YAAAJ,CAAA;MACA;QAAAC,GAAA;QAAAC,MAAA;QAAAC,EAAA;MAAA,EAAAH,CAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"script","externalDependencies":[]}