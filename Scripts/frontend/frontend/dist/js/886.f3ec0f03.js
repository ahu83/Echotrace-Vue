"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[886],{9840:function(t,e,s){s.d(e,{Z:function(){return d}});s(560);var a=function(){var t=this,e=t._self._c;return e("aside",{staticClass:"side",class:{expanded:t.expanded},on:{mouseenter:function(e){t.expanded=!0},mouseleave:function(e){t.expanded=!1}}},[e("div",{staticClass:"brand"},[e("img",{staticClass:"logo",attrs:{src:t.logo,alt:"logo"}}),e("span",{staticClass:"brand-text"},[t._v("Echo-trace")])]),e("nav",{staticClass:"nav"},[e("button",{staticClass:"item",on:{click:function(e){return t.$router.push("/result")}}},[e("span",{staticClass:"icon"},[e("svg",{attrs:{viewBox:"0 0 24 24"}},[e("path",{attrs:{fill:"#fff",d:"M11 7h2v8h-2V7zm0 10h2v2h-2v-2z"}})])]),e("span",{staticClass:"label"},[t._v("Deepfake detection")])]),e("button",{staticClass:"item",on:{click:function(e){return t.$router.push("/tts")}}},[e("span",{staticClass:"icon"},[e("svg",{attrs:{viewBox:"0 0 24 24"}},[e("path",{attrs:{fill:"#fff",d:"M12 14a3 3 0 0 0 3-3V6a3 3 0 0 0-6 0v5a3 3 0 0 0 3 3zm5-3a5 5 0 0 1-10 0H5a7 7 0 0 0 6 6.92V20H8v2h8v-2h-3v-2.08A7 7 0 0 0 19 11h-2z"}})])]),e("span",{staticClass:"label"},[t._v("Text to speech")])])])])},i=[],o={name:"SidePanel",props:{logo:{type:String,default:s(6949)}},data(){return{expanded:!1}}},r=o,n=s(3736),c=(0,n.Z)(r,a,i,!1,null,"b144f406",null),d=c.exports},1886:function(t,e,s){s.r(e),s.d(e,{default:function(){return l}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page detect"},[e("side-panel"),e("div",{staticClass:"looper"}),e("section",{staticClass:"panel-wrap"},[e("div",{staticClass:"panel fixed-panel"},[t._m(0),e("p",{staticClass:"sub"},[t._v("Likelihood of being AI generated")]),e("div",{staticClass:"chart-row"},[e("div",{staticClass:"donut"},[e("svg",{attrs:{width:t.size,height:t.size,viewBox:`0 0 ${t.size} ${t.size}`,role:"img","aria-label":"AI detection progress"}},[e("defs",[e("linearGradient",{attrs:{id:t.gradId,x1:"0%",y1:"0%",x2:"100%",y2:"0%"}},[e("stop",{attrs:{offset:"0%","stop-color":"#A855F7"}}),e("stop",{attrs:{offset:"100%","stop-color":"#3B82F6"}})],1)],1),e("circle",{attrs:{cx:t.center,cy:t.center,r:t.radius,stroke:`url(#${t.gradId})`,"stroke-width":t.stroke,fill:"none","stroke-linecap":"butt","stroke-dasharray":t.ringDash,transform:t.rotate}})]),e("div",{staticClass:"center-text"},[t.detecting?e("div",{staticClass:"line2 recording"},[t._v("●")]):e("div",{staticClass:"line2"},[t._v(t._s(t.score)+"%")])]),e("div",{staticClass:"button-wrap"},[e("button",{staticClass:"detect-btn",attrs:{disabled:t.detecting},on:{click:t.toggleDetect}},[t._v(" "+t._s(t.buttonText)+" ")])])])])])])],1)},i=[function(){var t=this,e=t._self._c;return e("header",{staticClass:"head"},[e("h2",{staticClass:"title"},[t._v("AI Detection")])])}],o=(s(560),s(9840)),r={name:"DetectionResult",components:{SidePanel:o.Z},data(){const t=466,e=48,s=t/2,a=(t-e)/2,i=2*Math.PI*a;return{size:t,stroke:e,center:s,radius:a,circum:i,gradId:"grad-donut-"+Math.random().toString(36).slice(2,8),rotate:`rotate(-90 ${s} ${s})`,detecting:!1,score:0,mediaRecorder:null,audioChunks:[]}},computed:{ringDash(){const t=.06*this.circum,e=this.circum-t,s=Math.max(0,Math.min(1,this.score/100))*e,a=this.circum-s;return`${s} ${a}`},buttonText(){return this.detecting?"Recording...":"Detect"}},methods:{async toggleDetect(){if(!this.detecting){this.detecting=!0,this.score=0;try{const t=await navigator.mediaDevices.getUserMedia({audio:!0});this.audioChunks=[],this.mediaRecorder=new MediaRecorder(t),this.mediaRecorder.ondataavailable=t=>this.audioChunks.push(t.data),this.mediaRecorder.start(),console.log("Recording started..."),await new Promise((t=>setTimeout(t,5e3))),this.mediaRecorder.stop(),console.log("Recording stopped.");const e=await new Promise((t=>{this.mediaRecorder.onstop=()=>{const e=new Blob(this.audioChunks,{type:"audio/wav"});t(e)}})),s=await this.blobToBase64(e);console.log("Sending audio to Flask...");const a=await fetch("http://127.0.0.1:5000/detect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audio:s})});if(!a.ok)throw new Error(`Server error: ${a.status}`);const i=await a.json(),o=i.score??0;console.log("Detection score:",o),this.animateScore(o)}catch(t){console.error("Detection error:",t),this.score=0}finally{this.detecting=!1}}},blobToBase64(t){return new Promise(((e,s)=>{const a=new FileReader;a.onloadend=()=>e(a.result.split(",")[1]),a.onerror=s,a.readAsDataURL(t)}))},animateScore(t){const e=(t-this.score)/30,s=setInterval((()=>{this.score+=e,(e>0&&this.score>=t||e<0&&this.score<=t)&&(this.score=Math.round(t),clearInterval(s))}),30)}}},n=r,c=s(3736),d=(0,c.Z)(n,a,i,!1,null,"00eb46dd",null),l=d.exports}}]);
//# sourceMappingURL=886.f3ec0f03.js.map